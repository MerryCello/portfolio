/***************************************************************!
 * Start Bootstrap - Resume v5.0.4 (https://startbootstrap.com/template-overviews/resume)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-resume/blob/master/LICENSE)
 ***************************************************************/

!function (t) { "use strict"; t('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function () { if (location.pathname.replace(/^\//, "") == this.pathname.replace(/^\//, "") && location.hostname == this.hostname) { var e = t(this.hash); if ((e = e.length ? e : t("[name=" + this.hash.slice(1) + "]")).length) return t("html, body").animate({ scrollTop: e.offset().top }, 1e3, "easeInOutExpo"), !1 } }), t(".js-scroll-trigger").click(function () { t(".navbar-collapse").collapse("hide") }), t("body").scrollspy({ target: "#sideNav" }) }(jQuery);

var COOKIE_THEME_NAME = "darkThemeEnabled"

// On Ready
$(() => {
   // check for dark mode cookie
   let darkThemeEnabled = getCookie(COOKIE_THEME_NAME)
   // toggleDracula if needed
   if (darkThemeEnabled)
      toggleDracula()
})

/**
 * GET COOKIE
 * @param {String} cname 
 * @returns {String}
 */
const getCookie = (cname) => {
   let name = cname + "=";
   let decodedCookie = decodeURIComponent(document.cookie);
   let ca = decodedCookie.split(';');
   for (let i = 0; i < ca.length; i++) {
      let c = ca[i];
      while (c.charAt(0) == ' ') {
         c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
         return c.substring(name.length, c.length);
      }
   }
   return "";
}

/***************************************************************
 * SET COOKIE
 * @param {String} cname 
 * @param {*} cvalue 
 * @param {String} exdays 
 ***************************************************************/
const setCookie = (cname, cvalue, exdays) => {
   const d = new Date();
   d.setTime(d.getTime() + (exdays*24*60*60*1000));
   let expires = "expires="+ d.toUTCString();
   document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
 }

/***************************************************************
 * Mobile feature: Name stays visible on scroll
 ***************************************************************/
var toggleNavMobileName = () => {
   let x = window.matchMedia("(max-width: 992px)");
   let navMobileName = document.getElementById("nav-mobile-name");
   let mobileName = document.getElementById("mobile-name");

   if (x.matches) {
      if (mobileName.getBoundingClientRect().y <= 20) { $("#nav-mobile-name").fadeIn(); }
      else { navMobileName.style.display = "none"; }
   }
};

window.onscroll = toggleNavMobileName;

/***************************************************************
 * DARK MODE
 ***************************************************************/
var toggleDracula = () => {
   setCookie(COOKIE_THEME_NAME, $('body').hasClass("dark-bg"), "")

   // toggle body
   $('body').toggleClass("dark-bg");

   // toggle scrollbar
   // TODO

   // toggle highlight sections
   $('section').each(() => {

      // Dark mode on
      if ($(this).hasClass("bg-highlight")) {
         $(this).removeClass("bg-highlight");
         $(this).addClass("dark-bg-highlight");
      }
      // Dark mode off
      else if ($(this).hasClass("dark-bg-highlight")) {
         $(this).removeClass("dark-bg-highlight");
         $(this).addClass("bg-highlight");
      }
   });

   // toggle form
   $('input').toggleClass("dark-form");
   $('textarea').toggleClass("dark-form");

   // toggle progress bar
   $('div').each(() => {

      // Dark mode on
      if ($(this).hasClass("bg-light")) {
         $(this).removeClass("bg-light");
         $(this).addClass("bg-dark");
      }
      // Dark mode off
      else if ($(this).hasClass("bg-dark")) {
         $(this).removeClass("bg-dark");
         $(this).addClass("bg-light");
      }

      // Dark mode on
      if ($(this).hasClass("progress-bar")) {
         $(this).removeClass("progress-bar");
         $(this).addClass("progress-bar-dark");
      }
      // Dark mode off
      else if ($(this).hasClass("progress-bar-dark")) {
         $(this).removeClass("progress-bar-dark");
         $(this).addClass("progress-bar");
      }
   });
}

$('.dk-mode-toggle').on('click', toggleDracula);
